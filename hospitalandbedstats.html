<!DOCTYPE html>
<html lang="en">

<head>
    <title>NCMS</title>
     <!-- Required meta tags always come first -->
     <meta charset="utf-8">
     <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
     <meta http-equiv="x-ua-compatible" content="ie=edge">
     

     <!-- Bootstrap CSS -->
     <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
     <link rel="stylesheet" href="node_modules/font-awesome/css/font-awesome.min.css">
     <link rel="stylesheet" href="node_modules/bootstrap-social/bootstrap-social.css">
    
     <link href="css/styles.css" rel="stylesheet">
     
     <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
    
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js" type="text/javascript"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js" ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.js"></script>
 
</head>

<body>
    <nav class="navbar navbar-dark navbar-expand-sm bg-primary fixed-top">
        <div class="container">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#Navbar">
                <span class="navbar-toggler-icon"></span>
            </button>

            <a class="navbar-brand " href="#">National COVID Management System</a>
            <div class="collapse navbar-collapse  justify-content-end" id="Navbar">
                <ul class="navbar-nav">
                    <li class="nav-item active "><a class="nav-link" href="./hospitalandbedstats.html"><span class="	fa fa-bar-chart"></span>Hospital & Bed Statics</a></li>
                    <li class="nav-item"><a class="nav-link" href="./viewpatientsbymoh.html"><span class="fa fa-address-book"></span>View Patients</a></li>
                    <li class="nav-item   "><a class="nav-link" href="./viewhospitals.html"><span class="	fa fa-plus-square"></span>View & add Hospitals</a></li>
                    <li class="nav-item "><a class="nav-link" href="./welcome.html"><span class="fa fa-sign-out"></span>Logout</a></li>
                       
                   
                </ul>            
           </div>    
        </div>
    </nav>


    <header class="jumbotron">
        <div class="container">
        <div class="row row-header">
                <div class="col">
                      <h1 class="text-center"> COVID-19 Daily Hospitals & Beds Status </h1>
                    
                   
                </div>
                
            </div>
        </div>
    </header>

   

    <div class="container"> 
        <div class="row">
            <ol class="col-12 breadcrumb">
                <li class="breadcrumb-item"><a href="./mohpage.html"> MOH </a></li>
                <li class="breadcrumb-item active">Daily Hospitals & Beds Statics</li>
            </ol>
        </div>

        <div class="row row-content">
            <div class="col-sm-5">
                
                   <div class="table-responsive">
                    <table id="hospital-stats">
                        <thead>
                          <tr>
                            <th>Hospital Name</th>
                            <th>Hospital Level Statistics</th>
                          </tr>
                          <tbody>
                         </thead>   
                          </tbody>
                        
                      </table>
                      <div class="chart">
                        <canvas id="myChart"></canvas>
                      </div>
                </div>
            </div>
           
           
       </div> 
       
    </div> 

    
    <footer class="footer">
        <div class="container">
            <div class="row">             
                <div class="col-4 offset-2 col-sm-2">
                    <h5>National COVID Management System</h5>
                    <address>
                        Ministry of Health<br>
		              
                      <i class="fa fa-phone fa-lg"></i>: +852 1234 5678<br>
                      <i class="fa fa-fax fa-lg"></i>: +852 8765 4321<br>
                      <i class="fa fa-envelope fa-lg"></i>: 
                      <a href="COVID@gmail.com">COVID@gmail.com</a>

		           </address>
                </div>
                
            </div>
           <div class="row justify-content-center">             
                <div class="col-auto">
                    <p>Â© National COVID Management System</p>
                </div>
           </div>
        </div>
    </footer>
    
<!-- jQuery first, then Popper.js, then Bootstrap JS. -->

<script src="node_modules/popper.js/dist/umd/popper.min.js"></script>
<script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $.ajax({
          type: "GET",
          url: 'http://localhost:8080/Statistics?method=hospitalLevel',
          dataType: "json",
          success: function(data, status, xhr) {
            console.log(data);
              $.each(data, function(key, obj) {
                console.log(key);
                  let printStr = '<tr><td>' + obj.name + '</td><td>' + obj.statistics + '</td></tr>';
                      $('#hospital-stats tr:last').after(printStr);
              });
              
          },
          error: function(jqXHR, textStatus, errorThrown){
              alert('Error: ' + textStatus + ' - ' + errorThrown);
          }


      });

        /*/var labels = json.map(function (e) {
            return e.name;
          });
          console.log(labels); // ["2016", "2017", "2018", "2019"]
          // Map JSON values back to values array
          var values = json.map(function (e) {
            return e.statistics;
          });
          console.log(values);*/


function BuildChart(labels, values, chartTitle) {
var ctx = document.getElementById("myChart").getContext('2d');
var myChart = new Chart(ctx, {
type: 'bar',
data: {
  labels: labels, // Our labels
  datasets: [{
    label: chartTitle, // Name the series
    data: values, // Our values
    backgroundColor: [ // Specify custom colors
      'rgba(255, 99, 132, 0.2)',
      'rgba(54, 162, 235, 0.2)',
      'rgba(255, 206, 86, 0.2)',
      'rgba(75, 192, 192, 0.2)',
      'rgba(153, 102, 255, 0.2)',
      'rgba(255, 159, 64, 0.2)'
    ],
    borderColor: [ // Add custom color borders
      'rgba(255,99,132,1)',
      'rgba(54, 162, 235, 1)',
      'rgba(255, 206, 86, 1)',
      'rgba(75, 192, 192, 1)',
      'rgba(153, 102, 255, 1)',
      'rgba(255, 159, 64, 1)'
    ],
    borderWidth: 1 // Specify bar border width
  }]
},
options: {
  responsive: true, // Instruct chart js to respond nicely.
  maintainAspectRatio: false, // Add to prevent default behavior of full-width/height 
}
});
return myChart;
}

    
    })
</script>




</body>

</html>